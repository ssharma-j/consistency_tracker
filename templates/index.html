<!DOCTYPE html>
<html>
<head>
  <title>Consistency Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; background:#f4f4f4; padding:20px }
    .card { background:white; padding:15px; margin-bottom:20px; border-radius:8px }
    button { padding:6px 10px }
    .done { color:green }
  </style>
</head>

<body>

<h2>ğŸ“… Today: {{ today }}</h2>

<div class="card">
  <h3>ğŸ”¥ Current Streak</h3>
  <p>{{ streak }} day(s)</p>
</div>

<div class="card">
  <h3>â• Add Habit</h3>
  <form method="POST">
    <input name="habit" placeholder="Habit name" required>
    <button>Add</button>
  </form>
</div>

<div class="card">
  <h3>ğŸ“‹ Habits</h3>
  <ul>
    {% for h in habits %}
      <li>
        {{ h[1] }}
        {% if h[0] in completed_ids %}
          <span class="done">âœ”</span>
        {% else %}
          <a href="/mark/{{ h[0] }}">[Mark]</a>
        {% endif %}
        <a href="/delete/{{ h[0] }}">[Delete]</a>
      </li>
    {% endfor %}
  </ul>
</div>

<div class="card">
  <h3>ğŸ“ What I Learned Today</h3>
  <form action="/save_note" method="POST">
    <textarea name="content" rows="4" style="width:100%">{{ today_note }}</textarea>
    <br><br>
    <button>Save</button>
  </form>
</div>

<p style="color:gray;font-size:12px">
  Rule: streak increases only if at least 5 habits are completed.
</p>

</body>
</html>
